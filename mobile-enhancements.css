/*
 * AniFox 2.4 - –ú–æ–±–∏–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
 * 
 * üíª –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ SerGio Play
 * üåê –í–µ–±-—Å–∞–π—Ç: https://sergioplay-dev.vercel.app/
 * üìÅ GitHub: https://github.com/SerGioPlay01/anifox-search
 * 
 * –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
 * 
 * –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –ø–ª–∞–Ω—à–µ—Ç–æ–≤
 */

/* =========================================== */
/* –£–õ–£–ß–®–ï–ù–ù–û–ï –ü–û–õ–ï –ü–û–ò–°–ö–ê –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
/* =========================================== */

@media (max-width: 768px) {
  .search-section {
    padding: 2rem 1rem;
  }
  
  #searchForm {
    gap: 1.25rem;
  }
  
  #searchInput {
    /* –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    height: 60px;
    min-height: 60px;
    
    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –Ω–∞ iOS */
    font-size: 16px;
    
    /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    padding: 1rem 1.5rem;
    
    /* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω */
    border-radius: 16px;
    border-width: 2px;
    
    /* –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–µ–Ω—å */
    box-shadow: 0 4px 12px rgba(108, 92, 231, 0.15);
    
    /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
    transition: all 0.3s ease;
  }
  
  #searchInput:focus {
    /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(108, 92, 231, 0.25);
  }
  
  #searchForm button {
    height: 60px;
    min-height: 60px;
    font-size: 16px;
    padding: 1rem 2rem;
    border-radius: 16px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }
}

@media (max-width: 480px) {
  .search-section {
    padding: 1.75rem 1rem;
  }
  
  #searchInput {
    height: 56px;
    min-height: 56px;
    font-size: 16px;
    padding: 0.875rem 1.25rem;
    border-radius: 14px;
  }
  
  #searchForm button {
    height: 56px;
    min-height: 56px;
    font-size: 16px;
    border-radius: 14px;
  }
}

@media (max-width: 360px) {
  .search-section {
    padding: 1.5rem 0.75rem;
  }
  
  #searchInput {
    height: 52px;
    min-height: 52px;
    font-size: 16px;
    padding: 0.75rem 1rem;
    border-radius: 12px;
  }
  
  #searchForm button {
    height: 52px;
    min-height: 52px;
    font-size: 16px;
    border-radius: 12px;
  }
}

/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
@media (max-width: 768px) {
  .mobile-nav-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-small);
    transition: var(--transition);
  }
  
  .mobile-nav-toggle:hover {
    background: var(--surface);
  }
  
  .header-nav.mobile-hidden {
    display: none;
  }
  
  .header-nav.mobile-visible {
    display: flex;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: rgba(13, 11, 20, 0.95);
    backdrop-filter: var(--blur);
    border-top: 1px solid rgba(108, 92, 231, 0.3);
    padding: 1rem;
    flex-direction: column;
    gap: 0.75rem;
    z-index: 1000;
  }
}

/* =========================================== */
/* –£–õ–£–ß–®–ï–ù–ù–´–ï –ö–ê–†–¢–û–ß–ö–ò –ê–ù–ò–ú–ï –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
/* =========================================== */

@media (max-width: 768px) {
  /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
  .results-grid.compact-mode {
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }
  
  .results-grid.compact-mode .anime-card {
    display: grid;
    grid-template-columns: 120px 1fr auto;
    gap: 1rem;
    align-items: center;
    padding: 0.75rem;
  }
  
  .results-grid.compact-mode .anime-poster {
    height: 160px;
    width: 120px;
    margin: 0;
  }
  
  .results-grid.compact-mode .anime-info {
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .results-grid.compact-mode .anime-actions {
    padding: 0;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .results-grid.compact-mode .action-btn {
    width: 32px;
    height: 32px;
  }
}

/* =========================================== */
/* –°–í–ê–ô–ü –ñ–ï–°–¢–´ */
/* =========================================== */

@media (hover: none) and (pointer: coarse) {
  .swipe-container {
    position: relative;
    overflow: hidden;
  }
  
  .swipe-item {
    transition: transform 0.3s ease;
  }
  
  .swipe-item.swiping {
    transition: none;
  }
  
  .swipe-actions {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    display: flex;
    align-items: center;
    background: var(--gradient-primary);
    padding: 0 1rem;
    transform: translateX(100%);
    transition: transform 0.3s ease;
  }
  
  .swipe-item.swiped .swipe-actions {
    transform: translateX(0);
  }
}

/* =========================================== */
/* PULL-TO-REFRESH */
/* =========================================== */

@media (hover: none) and (pointer: coarse) {
  .pull-to-refresh {
    position: relative;
  }
  
  .pull-indicator {
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    opacity: 0;
    transition: all 0.3s ease;
  }
  
  .pull-indicator.visible {
    opacity: 1;
    top: 20px;
  }
  
  .pull-indicator.loading {
    animation: spin 1s linear infinite;
  }
}

/* =========================================== */
/* –ú–û–ë–ò–õ–¨–ù–´–ï –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê */
/* =========================================== */

@media (max-width: 768px) {
  .modal-overlay {
    padding: 0;
    align-items: flex-end;
  }
  
  .modal-content {
    width: 100%;
    max-height: 90vh;
    border-radius: 20px 20px 0 0;
    margin: 0;
    animation: slideUpMobile 0.3s ease-out;
  }
  
  .modal-close {
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    font-size: 18px;
  }
}

@keyframes slideUpMobile {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

/* =========================================== */
/* –ú–û–ë–ò–õ–¨–ù–´–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
/* =========================================== */

@media (max-width: 768px) {
  .notification {
    position: fixed;
    top: auto;
    bottom: 20px;
    left: 20px;
    right: 20px;
    transform: translateY(100%);
    animation: slideUpNotification 0.3s ease-out forwards;
  }
  
  .notification.hide {
    animation: slideDownNotification 0.3s ease-out forwards;
  }
}

@keyframes slideUpNotification {
  to {
    transform: translateY(0);
  }
}

@keyframes slideDownNotification {
  to {
    transform: translateY(100%);
  }
}

/* =========================================== */
/* –í–ò–†–¢–£–ê–õ–¨–ù–ê–Ø –ö–õ–ê–í–ò–ê–¢–£–†–ê */
/* =========================================== */

@media (max-width: 768px) {
  /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É */
  .keyboard-active {
    padding-bottom: 0;
  }
  
  .keyboard-active .site-footer {
    display: none;
  }
  
  .keyboard-active .watermark {
    display: none;
  }
  
  .keyboard-active #scrollToTop {
    display: none;
  }
}

/* =========================================== */
/* –ñ–ï–°–¢–´ –ù–ê–í–ò–ì–ê–¶–ò–ò */
/* =========================================== */

@media (hover: none) and (pointer: coarse) {
  .gesture-zone {
    position: fixed;
    top: 0;
    left: 0;
    width: 20px;
    height: 100vh;
    z-index: 1000;
    pointer-events: auto;
  }
  
  .gesture-zone.right {
    left: auto;
    right: 0;
  }
  
  .back-gesture-indicator {
    position: fixed;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
  }
  
  .back-gesture-indicator.visible {
    opacity: 1;
    left: 40px;
  }
}

/* =========================================== */
/* –ê–î–ê–ü–¢–ò–í–ù–´–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø */
/* =========================================== */

@media (max-width: 768px) {
  .anime-poster img,
  .similar-anime-card img {
    /* –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
    loading: lazy;
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    image-rendering: auto;
  }
  
  /* Placeholder –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
  .image-placeholder {
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-size: 2rem;
    opacity: 0.7;
  }
  
  .image-loading {
    position: relative;
    overflow: hidden;
  }
  
  .image-loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: shimmer 1.5s infinite;
  }
}

@keyframes shimmer {
  to {
    left: 100%;
  }
}

/* =========================================== */
/* –ú–û–ë–ò–õ–¨–ù–ê–Ø –¢–ò–ü–û–ì–†–ê–§–ò–ö–ê */
/* =========================================== */

@media (max-width: 768px) {
  /* –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
  body {
    font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  /* –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
  .anime-title {
    font-size: clamp(0.9rem, 4vw, 1.2rem);
    line-height: 1.3;
  }
  
  .section-title {
    font-size: clamp(1.4rem, 6vw, 2rem);
    line-height: 1.2;
  }
  
  /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
  p, .anime-description p {
    margin-bottom: 1em;
    line-height: 1.6;
  }
}

/* =========================================== */
/* –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ */
/* =========================================== */

@media (max-width: 768px) {
  /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π */
  * {
    will-change: auto;
  }
  
  .anime-card,
  .nav-btn,
  .action-btn {
    will-change: transform;
  }
  
  /* –£–ø—Ä–æ—â–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
  .anime-card:hover,
  .nav-btn:hover {
    box-shadow: none;
  }
  
  /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ */
  body::before {
    display: none;
  }
}

/* =========================================== */
/* –î–û–°–¢–£–ü–ù–û–°–¢–¨ */
/* =========================================== */

@media (max-width: 768px) {
  /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Å–∞–Ω–∏—è */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç */
  .high-contrast {
    filter: contrast(1.2);
  }
  
  /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä—É–ø–Ω–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ */
  @media (prefers-reduced-motion: no-preference) {
    .large-text {
      font-size: 1.2em;
    }
  }
}

/* =========================================== */
/* –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò */
/* =========================================== */

/* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSS Container Queries */
@supports (container-type: inline-size) {
  .anime-card {
    container-type: inline-size;
  }
  
  @container (max-width: 200px) {
    .anime-title {
      font-size: 0.8rem;
    }
    
    .anime-info {
      padding: 0.5rem;
    }
  }
}

/* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSS Scroll Snap */
@supports (scroll-snap-type: x mandatory) {
  .horizontal-scroll {
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    display: flex;
    gap: 1rem;
  }
  
  .horizontal-scroll .anime-card {
    scroll-snap-align: start;
    flex: 0 0 auto;
  }
}

/* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSS Subgrid */
@supports (grid-template-rows: subgrid) {
  .results-grid {
    display: grid;
    grid-template-rows: subgrid;
  }
}

/* =========================================== */
/* –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø iOS */
/* =========================================== */

/* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –Ω–∞ iOS –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input */
@supports (-webkit-touch-callout: none) {
  #searchInput {
    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞ */
    font-size: 16px !important;
    
    /* –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—é –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ */
    -webkit-appearance: none;
    -webkit-border-radius: 0;
    border-radius: 16px;
    
    /* –£–ª—É—á—à–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  #searchInput:focus {
    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
    font-size: 16px !important;
    zoom: 1;
  }
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è Safari –Ω–∞ iOS */
@media screen and (-webkit-min-device-pixel-ratio: 2) {
  #searchInput {
    /* –ß–µ—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –Ω–∞ Retina –¥–∏—Å–ø–ª–µ—è—Ö */
    border-width: 1px;
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ DPI */
    background-clip: padding-box;
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è iPhone X –∏ –Ω–æ–≤–µ–µ (—Å notch) */
@supports (padding: max(0px)) {
  @media (max-width: 768px) {
    .search-section {
      padding-left: max(1rem, env(safe-area-inset-left));
      padding-right: max(1rem, env(safe-area-inset-right));
    }
  }
}

/* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ iPhone */
@media screen and (max-width: 768px) and (orientation: landscape) and (max-height: 500px) {
  .search-section {
    padding: 1rem;
  }
  
  #searchInput,
  #searchForm button {
    height: 48px;
    min-height: 48px;
  }
  
  #searchInput {
    font-size: 16px;
    padding: 0.75rem 1rem;
  }
}